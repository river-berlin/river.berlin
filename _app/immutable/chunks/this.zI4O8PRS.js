import{q as b,H as v,v as y,x as n,y as c,z as _,Y as A,Z as S,W as k,b as o,A as N,S as g}from"./runtime.DUyZiCcr.js";import{h as q,s as d,d as x}from"./disclose-version.D0xC6aFX.js";function p(a,f,i,r=null,t=!1){var s=null,e=null,l=null,h=t?A:0;b(()=>{if(l===(l=!!f()))return;let u=!1;if(q){const T=a.data===v;l===T&&(y(x),d(!1),u=!0)}l?(s?n(s):s=c(()=>i(a)),e&&_(e,()=>{e=null})):(e?n(e):r&&(e=c(()=>r(a))),s&&_(s,()=>{s=null})),u&&d(!0)},h)}function E(a,f){var r;var i=a&&((r=a[g])==null?void 0:r.t);return a===f||i===f}function D(a,f,i,r){S(()=>{var t,s;return k(()=>{t=s,s=[],o(()=>{a!==i(...s)&&(f(a,...s),t&&E(i(...t),a)&&f(null,...t))})}),()=>{N(()=>{s&&E(i(...s),a)&&f(null,...s)})}})}export{D as b,p as i};
