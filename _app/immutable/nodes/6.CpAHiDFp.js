import{o as x,h as A,a as p,t as v,q as C,f as _,b as a,m as h,n as I}from"../chunks/disclose-version.D08hq0Pc.js";import{p as N,_ as O,$ as T,a as z,g as o,h as n,m as u,t as F,a0 as G}from"../chunks/runtime.BxdIbG5o.js";import{i as M}from"../chunks/if._Wkfx-WE.js";import{b as g}from"../chunks/this.Cao2wo4a.js";function B(y){return function(...f){var c=f[0];return c.preventDefault(),y.apply(this,f)}}var H=v('<link rel="preconnect" href="https://fonts.googleapis.com"> <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin=""> <link href="https://fonts.googleapis.com/css2?family=Bad+Script&amp;display=swap" rel="stylesheet">',1),J=v('Release <span class="m blue-bolder svelte-1vhtuc9">M</span> to play audio',1),Q=v('Press <span class="m svelte-1vhtuc9">M</span> to record audio',1),V=v('<br><p class="time-recorded svelte-1vhtuc9"> </p>',1),W=v('<div class="full-page svelte-1vhtuc9"><div class="main-text svelte-1vhtuc9"><!> <div class="audio-stuff"><audio></audio></div></div> <!></div>');function te(y,f){N(f,!1);const c=u();let m=u(),l=u(),k=u(),d=u(!1),b=[],s,w=Date.now();async function E(){w=Date.now();const e=await navigator.mediaDevices.getUserMedia({audio:!0});s=new MediaRecorder(e),s.start(),s.onstart=t=>{console.log(s.state)},s.ondataavailable=t=>{b.push(t.data),console.log(s.state),console.log("recorder started")},w=Date.now()}function K(){let e=b;b=[];const t=new Blob(e,{type:"audio/ogg; codecs=opus"}),r=window.URL.createObjectURL(t);G(l,o(l).src=r),o(l).addEventListener("canplaythrough",()=>{o(l).play()})}async function P(e){e.keyCode==77&&(o(d)==!1?(n(d,!0),E()):n(c,Number.parseInt((Date.now()-w)/1e3)))}function $(e){e.keyCode==77&&n(d,!1),s&&(s.stop(),s.addEventListener("stop",K))}O(()=>{},()=>{n(c,0)}),T();var R=W();x("keydown",C,B(P),!1),x("keyup",C,B($),!1),A(e=>{var t=H(),r=_(t),i=a(a(r,!0)),U=a(a(i,!0));p(e,t)});var D=h(R),L=h(D);M(L,()=>o(d),e=>{var t=J(),r=a(_(t,!0));g(r,i=>n(m,i),()=>o(m)),p(e,t)},e=>{var t=Q(),r=a(_(t,!0));g(r,i=>n(m,i),()=>o(m)),p(e,t)});var S=a(a(L,!0));g(S,e=>n(k,e),()=>o(k));var j=h(S);g(j,e=>n(l,e),()=>o(l));var q=a(a(D,!0));M(q,()=>o(d),e=>{var t=V(),r=_(t),i=a(r),U=h(i);F(()=>I(U,o(c))),p(e,t)}),p(y,R),z()}export{te as component};
