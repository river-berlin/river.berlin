import{k as x,l as A,f as u,t as v,$ as C,m as _,g as t,j as g,i as I}from"../chunks/disclose-version.D0xC6aFX.js";import{Q as N,_ as O,$ as Q,R as q,g as s,k as n,n as p,T as z,a0 as F}from"../chunks/runtime.DUyZiCcr.js";import{i as M,b as h}from"../chunks/this.zI4O8PRS.js";function $(y){return function(...f){var d=f[0];return d.preventDefault(),y.apply(this,f)}}var G=v('<link rel="preconnect" href="https://fonts.googleapis.com"> <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin=""> <link href="https://fonts.googleapis.com/css2?family=Bad+Script&amp;display=swap" rel="stylesheet">',1),H=v('Release <span class="m blue-bolder svelte-uplvu6">M</span> to play audio',1),J=v('Press <span class="m svelte-uplvu6">M</span> to record audio',1),V=v('<br><p class="time-recorded svelte-uplvu6"> </p>',1),W=v('<div class="full-page svelte-uplvu6"><div class="main-text svelte-uplvu6"><!> <div class="audio-stuff"><audio></audio></div></div> <!></div>');function ee(y,f){N(f,!1);const d=p();let m=p(),l=p(),w=p(),c=p(!1),b=[],o,k=Date.now();async function j(){k=Date.now();const e=await navigator.mediaDevices.getUserMedia({audio:!0});o=new MediaRecorder(e),o.start(),o.onstart=a=>{console.log(o.state)},o.ondataavailable=a=>{b.push(a.data),console.log(o.state),console.log("recorder started")},k=Date.now()}function B(){let e=b;b=[];const a=new Blob(e,{type:"audio/ogg; codecs=opus"}),r=window.URL.createObjectURL(a);F(l,s(l).src=r),s(l).addEventListener("canplaythrough",()=>{s(l).play()})}async function E(e){e.keyCode==77&&(s(c)==!1?(n(c,!0),j()):n(d,Number.parseInt((Date.now()-k)/1e3)))}function K(e){e.keyCode==77&&n(c,!1),o&&(o.stop(),o.addEventListener("stop",B))}O(()=>{},()=>{n(d,0)}),Q();var R=W();x("keydown",C,$(E),!1),x("keyup",C,$(K),!1),A(e=>{var a=G(),r=_(a),i=t(t(r,!0)),U=t(t(i,!0));u(e,a)});var D=g(R),L=g(D);M(L,()=>s(c),e=>{var a=H(),r=t(_(a,!0));h(r,i=>n(m,i),()=>s(m)),u(e,a)},e=>{var a=J(),r=t(_(a,!0));h(r,i=>n(m,i),()=>s(m)),u(e,a)});var S=t(t(L,!0));h(S,e=>n(w,e),()=>s(w));var P=g(S);h(P,e=>n(l,e),()=>s(l));var T=t(t(D,!0));M(T,()=>s(c),e=>{var a=V(),r=_(a),i=t(r),U=g(i);z(()=>I(U,s(d))),u(e,a)}),u(y,R),q()}export{ee as component};
