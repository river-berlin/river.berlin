import{a as p,t as u}from"../chunks/disclose-version.CbfRcCiA.js";import"../chunks/legacy.DeEp65c2.js";import{p as z,as as F,at as G,a as H,a5 as x,aA as C,g as a,c as h,s as v,f as L,a4 as r,r as _,t as J,m as f,aB as Q}from"../chunks/runtime.DoT5juBB.js";import{s as V}from"../chunks/render.Dj8SksmN.js";import{i as M}from"../chunks/if.BmNQ3SIh.js";import{h as W}from"../chunks/svelte-head.7B0A5erz.js";import{e as B}from"../chunks/events.BiWpltIU.js";import{b as y}from"../chunks/5.BdAxaMfk.js";import{i as X}from"../chunks/lifecycle.BpS5lmQ1.js";function A(n){return function(...m){var l=m[0];return l.preventDefault(),n==null?void 0:n.apply(this,m)}}var Y=u('<link rel="preconnect" href="https://fonts.googleapis.com"> <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin=""> <link href="https://fonts.googleapis.com/css2?family=Bad+Script&amp;display=swap" rel="stylesheet">',1),Z=u('Release <span class="m blue-bolder svelte-1vhtuc9">M</span> to play audio',1),$=u('Press <span class="m svelte-1vhtuc9">M</span> to record audio',1),ee=u('<br><p class="time-recorded svelte-1vhtuc9"> </p>',1),te=u('<div class="full-page svelte-1vhtuc9"><div class="main-text svelte-1vhtuc9"><!> <div class="audio-stuff"><audio></audio></div></div> <!></div>');function pe(n,m){z(m,!1);const l=f();let g=f(),i=f(),S=f(),c=f(!1),b=[],o,w=Date.now();async function E(){w=Date.now();const e=await navigator.mediaDevices.getUserMedia({audio:!0});o=new MediaRecorder(e),o.start(),o.onstart=t=>{console.log(o.state)},o.ondataavailable=t=>{b.push(t.data),console.log(o.state),console.log("recorder started")},w=Date.now()}function K(){let e=b;b=[];const t=new Blob(e,{type:"audio/ogg; codecs=opus"}),s=window.URL.createObjectURL(t);Q(i,a(i).src=s),a(i).addEventListener("canplaythrough",()=>{a(i).play()})}async function P(e){e.keyCode==77&&(a(c)==!1?(r(c,!0),E()):r(l,Number.parseInt((Date.now()-w)/1e3)))}function j(e){e.keyCode==77&&r(c,!1),o&&(o.stop(),o.addEventListener("stop",K))}F(()=>{},()=>{r(l,0)}),G(),X();var k=te();W(e=>{var t=Y();x(4),p(e,t)}),B("keydown",C,A(P)),B("keyup",C,A(j));var R=h(k),U=h(R);{var I=e=>{var t=Z(),s=v(L(t));y(s,d=>r(g,d),()=>a(g)),x(),p(e,t)},N=e=>{var t=$(),s=v(L(t));y(s,d=>r(g,d),()=>a(g)),x(),p(e,t)};M(U,e=>{a(c)?e(I):e(N,!1)})}var D=v(U,2),O=h(D);y(O,e=>r(i,e),()=>a(i)),_(D),y(D,e=>r(S,e),()=>a(S)),_(R);var T=v(R,2);{var q=e=>{var t=ee(),s=v(L(t)),d=h(s,!0);_(s),J(()=>V(d,a(l))),p(e,t)};M(T,e=>{a(c)&&e(q)})}_(k),p(n,k),H()}export{pe as component};
