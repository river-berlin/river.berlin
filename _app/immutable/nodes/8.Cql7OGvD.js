import{a as p,t as v,l as x,f as _,s as a,c as g}from"../chunks/disclose-version.D9OSwYqE.js";import{p as N,Y as O,Z as T,a as Y,g as o,s as n,m as u,t as Z,a2 as $}from"../chunks/runtime.exGAXoH1.js";import{e as C,h as q,s as z}from"../chunks/render.Dlh5bYvk.js";import{i as M}from"../chunks/if.DvCi0R4t.js";import{b as h}from"../chunks/this.6tPjEexy.js";function B(y){return function(...f){var c=f[0];return c.preventDefault(),y.apply(this,f)}}var F=v('<link rel="preconnect" href="https://fonts.googleapis.com"> <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin=""> <link href="https://fonts.googleapis.com/css2?family=Bad+Script&amp;display=swap" rel="stylesheet">',1),G=v('Release <span class="m blue-bolder svelte-1vhtuc9">M</span> to play audio',1),H=v('Press <span class="m svelte-1vhtuc9">M</span> to record audio',1),J=v('<br><p class="time-recorded svelte-1vhtuc9"> </p>',1),Q=v('<div class="full-page svelte-1vhtuc9"><div class="main-text svelte-1vhtuc9"><!> <div class="audio-stuff"><audio></audio></div></div> <!></div>');function ae(y,f){N(f,!1);const c=u();let m=u(),l=u(),k=u(),d=u(!1),b=[],s,w=Date.now();async function E(){w=Date.now();const e=await navigator.mediaDevices.getUserMedia({audio:!0});s=new MediaRecorder(e),s.start(),s.onstart=t=>{console.log(s.state)},s.ondataavailable=t=>{b.push(t.data),console.log(s.state),console.log("recorder started")},w=Date.now()}function K(){let e=b;b=[];const t=new Blob(e,{type:"audio/ogg; codecs=opus"}),r=window.URL.createObjectURL(t);$(l,o(l).src=r),o(l).addEventListener("canplaythrough",()=>{o(l).play()})}async function P(e){e.keyCode==77&&(o(d)==!1?(n(d,!0),E()):n(c,Number.parseInt((Date.now()-w)/1e3)))}function j(e){e.keyCode==77&&n(d,!1),s&&(s.stop(),s.addEventListener("stop",K))}O(()=>{},()=>{n(c,0)}),T();var R=Q();C("keydown",x,B(P),!1),C("keyup",x,B(j),!1),q(e=>{var t=F(),r=_(t),i=a(a(r,!0)),U=a(a(i,!0));p(e,t)});var D=g(R),L=g(D);M(L,()=>o(d),e=>{var t=G(),r=a(_(t,!0));h(r,i=>n(m,i),()=>o(m)),p(e,t)},e=>{var t=H(),r=a(_(t,!0));h(r,i=>n(m,i),()=>o(m)),p(e,t)});var S=a(a(L,!0));h(S,e=>n(k,e),()=>o(k));var A=g(S);h(A,e=>n(l,e),()=>o(l));var I=a(a(D,!0));M(I,()=>o(d),e=>{var t=J(),r=_(t),i=a(r),U=g(i);Z(()=>z(U,o(c))),p(e,t)}),p(y,R),Y()}export{ae as component};
