import{o as S,a as c,t as f}from"../chunks/disclose-version.ZZ05wG9w.js";import"../chunks/legacy.C5WEQ8CC.js";import{p as q,ay as F,az as G,a as H,a9 as R,aA as U,g as t,s as d,c as m,f as D,a8 as r,r as u,t as J,m as p,aB as Q}from"../chunks/runtime.BJvmUhqp.js";import{s as V}from"../chunks/render.D_WgwVa5.js";import{i as C}from"../chunks/if.Bwpi0SWl.js";import{h as W}from"../chunks/svelte-head.CWDF9g08.js";import{b as g}from"../chunks/5.CL5QIiz_.js";import{p as M}from"../chunks/event-modifiers.CWmzcjye.js";import{i as X}from"../chunks/lifecycle.wnX_UMhn.js";var Y=f('<link rel="preconnect" href="https://fonts.googleapis.com"> <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin=""> <link href="https://fonts.googleapis.com/css2?family=Bad+Script&amp;display=swap" rel="stylesheet">',1),Z=f('Release <span class="m blue-bolder svelte-1vhtuc9">M</span> to play audio',1),$=f('Press <span class="m svelte-1vhtuc9">M</span> to record audio',1),ee=f('<br><p class="time-recorded svelte-1vhtuc9"> </p>',1),ae=f('<div class="full-page svelte-1vhtuc9"><div class="main-text svelte-1vhtuc9"><!> <div class="audio-stuff"><audio></audio></div></div> <!></div>');function pe(B,A){q(A,!1);const _=p();let v=p(),i=p(),x=p(),n=p(!1),h=[],o,y=Date.now();async function E(){y=Date.now();const e=await navigator.mediaDevices.getUserMedia({audio:!0});o=new MediaRecorder(e),o.start(),o.onstart=a=>{console.log(o.state)},o.ondataavailable=a=>{h.push(a.data),console.log(o.state),console.log("recorder started")},y=Date.now()}function K(){let e=h;h=[];const a=new Blob(e,{type:"audio/ogg; codecs=opus"}),s=window.URL.createObjectURL(a);Q(i,t(i).src=s),t(i).addEventListener("canplaythrough",()=>{t(i).play()})}async function P(e){e.keyCode==77&&(t(n)==!1?(r(n,!0),E()):r(_,Number.parseInt((Date.now()-y)/1e3)))}function j(e){e.keyCode==77&&r(n,!1),o&&(o.stop(),o.addEventListener("stop",K))}F(()=>{},()=>{r(_,0)}),G(),X();var b=ae();W(e=>{var a=Y();R(4),c(e,a)}),S("keydown",U,M(P)),S("keyup",U,M(j));var w=m(b),L=m(w);{var z=e=>{var a=Z(),s=d(D(a));g(s,l=>r(v,l),()=>t(v)),R(),c(e,a)},I=e=>{var a=$(),s=d(D(a));g(s,l=>r(v,l),()=>t(v)),R(),c(e,a)};C(L,e=>{t(n)?e(z):e(I,!1)})}var k=d(L,2),N=m(k);g(N,e=>r(i,e),()=>t(i)),u(k),g(k,e=>r(x,e),()=>t(x)),u(w);var O=d(w,2);{var T=e=>{var a=ee(),s=d(D(a)),l=m(s,!0);u(s),J(()=>V(l,t(_))),c(e,a)};C(O,e=>{t(n)&&e(T)})}u(b),c(B,b),H()}export{pe as component};
