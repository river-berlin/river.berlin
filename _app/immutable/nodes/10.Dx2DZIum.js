import{f as C,a as p,t as u}from"../chunks/disclose-version.zZcWcFeR.js";import"../chunks/legacy.CAZK4d57.js";import{p as q,ay as F,az as G,a as H,a5 as x,aA as M,g as t,c as h,s as v,f as L,a4 as r,r as _,t as J,m as f,aB as Q}from"../chunks/runtime.Cj9k1G5_.js";import{s as V}from"../chunks/render.B_s_QQS3.js";import{i as B}from"../chunks/if.CPYYQzvg.js";import{h as W}from"../chunks/svelte-head.CmwnekL4.js";import{b as y}from"../chunks/5.BzQ4aFsm.js";import{i as X}from"../chunks/lifecycle.CyH4p_rw.js";function A(n){return function(...m){var l=m[0];return l.preventDefault(),n==null?void 0:n.apply(this,m)}}var Y=u('<link rel="preconnect" href="https://fonts.googleapis.com"> <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin=""> <link href="https://fonts.googleapis.com/css2?family=Bad+Script&amp;display=swap" rel="stylesheet">',1),Z=u('Release <span class="m blue-bolder svelte-1vhtuc9">M</span> to play audio',1),$=u('Press <span class="m svelte-1vhtuc9">M</span> to record audio',1),ee=u('<br><p class="time-recorded svelte-1vhtuc9"> </p>',1),ae=u('<div class="full-page svelte-1vhtuc9"><div class="main-text svelte-1vhtuc9"><!> <div class="audio-stuff"><audio></audio></div></div> <!></div>');function de(n,m){q(m,!1);const l=f();let g=f(),i=f(),S=f(),c=f(!1),b=[],o,w=Date.now();async function E(){w=Date.now();const e=await navigator.mediaDevices.getUserMedia({audio:!0});o=new MediaRecorder(e),o.start(),o.onstart=a=>{console.log(o.state)},o.ondataavailable=a=>{b.push(a.data),console.log(o.state),console.log("recorder started")},w=Date.now()}function K(){let e=b;b=[];const a=new Blob(e,{type:"audio/ogg; codecs=opus"}),s=window.URL.createObjectURL(a);Q(i,t(i).src=s),t(i).addEventListener("canplaythrough",()=>{t(i).play()})}async function P(e){e.keyCode==77&&(t(c)==!1?(r(c,!0),E()):r(l,Number.parseInt((Date.now()-w)/1e3)))}function j(e){e.keyCode==77&&r(c,!1),o&&(o.stop(),o.addEventListener("stop",K))}F(()=>{},()=>{r(l,0)}),G(),X();var k=ae();W(e=>{var a=Y();x(4),p(e,a)}),C("keydown",M,A(P)),C("keyup",M,A(j));var R=h(k),U=h(R);{var z=e=>{var a=Z(),s=v(L(a));y(s,d=>r(g,d),()=>t(g)),x(),p(e,a)},I=e=>{var a=$(),s=v(L(a));y(s,d=>r(g,d),()=>t(g)),x(),p(e,a)};B(U,e=>{t(c)?e(z):e(I,!1)})}var D=v(U,2),N=h(D);y(N,e=>r(i,e),()=>t(i)),_(D),y(D,e=>r(S,e),()=>t(S)),_(R);var O=v(R,2);{var T=e=>{var a=ee(),s=v(L(a)),d=h(s,!0);_(s),J(()=>V(d,t(l))),p(e,a)};B(O,e=>{t(c)&&e(T)})}_(k),p(n,k),H()}export{de as component};
