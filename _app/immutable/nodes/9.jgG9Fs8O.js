import{a as p,t as v,l as x,f as _,s as a,c as g}from"../chunks/disclose-version.DpX56LbY.js";import{p as I,y as N,z as O,a as T,g as o,A as n,m as u,t as V,V as $}from"../chunks/runtime.D7Zm4V6B.js";import{e as C,h as q,s as F}from"../chunks/render.BlKq55lq.js";import{i as M}from"../chunks/if.BEKqfSEs.js";import{b as h}from"../chunks/this.DNVX-ayh.js";function A(y){return function(...f){var c=f[0];return c.preventDefault(),y.apply(this,f)}}var G=v('<link rel="preconnect" href="https://fonts.googleapis.com"> <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin=""> <link href="https://fonts.googleapis.com/css2?family=Bad+Script&amp;display=swap" rel="stylesheet">',1),H=v('Release <span class="m blue-bolder svelte-1vhtuc9">M</span> to play audio',1),J=v('Press <span class="m svelte-1vhtuc9">M</span> to record audio',1),Q=v('<br><p class="time-recorded svelte-1vhtuc9"> </p>',1),W=v('<div class="full-page svelte-1vhtuc9"><div class="main-text svelte-1vhtuc9"><!> <div class="audio-stuff"><audio></audio></div></div> <!></div>');function ae(y,f){I(f,!1);const c=u();let m=u(),l=u(),k=u(),d=u(!1),b=[],s,w=Date.now();async function B(){w=Date.now();const e=await navigator.mediaDevices.getUserMedia({audio:!0});s=new MediaRecorder(e),s.start(),s.onstart=t=>{console.log(s.state)},s.ondataavailable=t=>{b.push(t.data),console.log(s.state),console.log("recorder started")},w=Date.now()}function E(){let e=b;b=[];const t=new Blob(e,{type:"audio/ogg; codecs=opus"}),r=window.URL.createObjectURL(t);$(l,o(l).src=r),o(l).addEventListener("canplaythrough",()=>{o(l).play()})}async function K(e){e.keyCode==77&&(o(d)==!1?(n(d,!0),B()):n(c,Number.parseInt((Date.now()-w)/1e3)))}function P(e){e.keyCode==77&&n(d,!1),s&&(s.stop(),s.addEventListener("stop",E))}N(()=>{},()=>{n(c,0)}),O();var R=W();C("keydown",x,A(K),!1),C("keyup",x,A(P),!1),q(e=>{var t=G(),r=_(t),i=a(a(r,!0)),U=a(a(i,!0));p(e,t)});var D=g(R),L=g(D);M(L,()=>o(d),e=>{var t=H(),r=a(_(t,!0));h(r,i=>n(m,i),()=>o(m)),p(e,t)},e=>{var t=J(),r=a(_(t,!0));h(r,i=>n(m,i),()=>o(m)),p(e,t)});var S=a(a(L,!0));h(S,e=>n(k,e),()=>o(k));var j=g(S);h(j,e=>n(l,e),()=>o(l));var z=a(a(D,!0));M(z,()=>o(d),e=>{var t=Q(),r=_(t),i=a(r),U=g(i);V(()=>F(U,o(c))),p(e,t)}),p(y,R),T()}export{ae as component};
