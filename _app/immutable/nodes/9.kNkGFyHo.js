import{a as p,t as u}from"../chunks/disclose-version.I9ZBIlgW.js";import"../chunks/legacy.CusTTcTb.js";import{p as q,ah as z,ai as F,a as G,n as x,au as C,g as a,c as g,s as v,f as L,r as _,t as H,m as f,W as r,av as J}from"../chunks/runtime.ZCwqNjaL.js";import{e as M,s as Q}from"../chunks/render.Cp3DLeft.js";import{i as B}from"../chunks/if._s0Q-GvM.js";import{h as V}from"../chunks/svelte-head.gad1Cy0X.js";import{b as y}from"../chunks/3.CcX-R9Fi.js";import{i as X}from"../chunks/lifecycle.C3edSOH9.js";function E(n){return function(...m){var l=m[0];return l.preventDefault(),n==null?void 0:n.apply(this,m)}}var Y=u('<link rel="preconnect" href="https://fonts.googleapis.com"> <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin=""> <link href="https://fonts.googleapis.com/css2?family=Bad+Script&amp;display=swap" rel="stylesheet">',1),Z=u('Release <span class="m blue-bolder svelte-1vhtuc9">M</span> to play audio',1),$=u('Press <span class="m svelte-1vhtuc9">M</span> to record audio',1),ee=u('<br><p class="time-recorded svelte-1vhtuc9"> </p>',1),te=u('<div class="full-page svelte-1vhtuc9"><div class="main-text svelte-1vhtuc9"><!> <div class="audio-stuff"><audio></audio></div></div> <!></div>');function de(n,m){q(m,!1);const l=f();let h=f(),i=f(),S=f(),c=f(!1),b=[],o,w=Date.now();async function K(){w=Date.now();const e=await navigator.mediaDevices.getUserMedia({audio:!0});o=new MediaRecorder(e),o.start(),o.onstart=t=>{console.log(o.state)},o.ondataavailable=t=>{b.push(t.data),console.log(o.state),console.log("recorder started")},w=Date.now()}function P(){let e=b;b=[];const t=new Blob(e,{type:"audio/ogg; codecs=opus"}),s=window.URL.createObjectURL(t);J(i,a(i).src=s),a(i).addEventListener("canplaythrough",()=>{a(i).play()})}async function j(e){e.keyCode==77&&(a(c)==!1?(r(c,!0),K()):r(l,Number.parseInt((Date.now()-w)/1e3)))}function A(e){e.keyCode==77&&r(c,!1),o&&(o.stop(),o.addEventListener("stop",P))}z(()=>{},()=>{r(l,0)}),F(),X();var k=te();V(e=>{var t=Y();x(4),p(e,t)}),M("keydown",C,E(j)),M("keyup",C,E(A));var R=g(k),U=g(R);{var I=e=>{var t=Z(),s=v(L(t));y(s,d=>r(h,d),()=>a(h)),x(),p(e,t)},N=e=>{var t=$(),s=v(L(t));y(s,d=>r(h,d),()=>a(h)),x(),p(e,t)};B(U,e=>{a(c)?e(I):e(N,!1)})}var D=v(U,2),O=g(D);y(O,e=>r(i,e),()=>a(i)),_(D),y(D,e=>r(S,e),()=>a(S)),_(R);var T=v(R,2);{var W=e=>{var t=ee(),s=v(L(t)),d=g(s,!0);_(s),H(()=>Q(d,a(l))),p(e,t)};B(T,e=>{a(c)&&e(W)})}_(k),p(n,k),G()}export{de as component};
