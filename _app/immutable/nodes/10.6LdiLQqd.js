import{h as T,q as S,a as c,t as f}from"../chunks/disclose-version.CO5M8TLv.js";import"../chunks/legacy.B-7MJhEK.js";import{p as F,ax as G,ay as H,a as J,a8 as R,az as U,g as t,s as d,c as m,f as D,a7 as r,r as u,t as Q,m as p,aA as V}from"../chunks/runtime.DqjPnbKP.js";import{s as W}from"../chunks/render.BBFyn_qk.js";import{i as C}from"../chunks/if.DeI0Ol0B.js";import{b as g}from"../chunks/5.WAbn9rpC.js";import{p as M}from"../chunks/event-modifiers.CWmzcjye.js";import{i as X}from"../chunks/lifecycle.Coh52jrL.js";var Y=f('<link rel="preconnect" href="https://fonts.googleapis.com"> <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin=""> <link href="https://fonts.googleapis.com/css2?family=Bad+Script&amp;display=swap" rel="stylesheet">',1),Z=f('Release <span class="m blue-bolder svelte-1vhtuc9">M</span> to play audio',1),$=f('Press <span class="m svelte-1vhtuc9">M</span> to record audio',1),ee=f('<br><p class="time-recorded svelte-1vhtuc9"> </p>',1),ae=f('<div class="full-page svelte-1vhtuc9"><div class="main-text svelte-1vhtuc9"><!> <div class="audio-stuff"><audio></audio></div></div> <!></div>');function de(A,B){F(B,!1);const _=p();let v=p(),i=p(),x=p(),n=p(!1),h=[],s,y=Date.now();async function E(){y=Date.now();const e=await navigator.mediaDevices.getUserMedia({audio:!0});s=new MediaRecorder(e),s.start(),s.onstart=a=>{console.log(s.state)},s.ondataavailable=a=>{h.push(a.data),console.log(s.state),console.log("recorder started")},y=Date.now()}function K(){let e=h;h=[];const a=new Blob(e,{type:"audio/ogg; codecs=opus"}),o=window.URL.createObjectURL(a);V(i,t(i).src=o),t(i).addEventListener("canplaythrough",()=>{t(i).play()})}async function P(e){e.keyCode==77&&(t(n)==!1?(r(n,!0),E()):r(_,Number.parseInt((Date.now()-y)/1e3)))}function j(e){e.keyCode==77&&r(n,!1),s&&(s.stop(),s.addEventListener("stop",K))}G(()=>{},()=>{r(_,0)}),H(),X();var b=ae();T(e=>{var a=Y();R(4),c(e,a)}),S("keydown",U,M(P)),S("keyup",U,M(j));var w=m(b),L=m(w);{var q=e=>{var a=Z(),o=d(D(a));g(o,l=>r(v,l),()=>t(v)),R(),c(e,a)},z=e=>{var a=$(),o=d(D(a));g(o,l=>r(v,l),()=>t(v)),R(),c(e,a)};C(L,e=>{t(n)?e(q):e(z,!1)})}var k=d(L,2),I=m(k);g(I,e=>r(i,e),()=>t(i)),u(k),g(k,e=>r(x,e),()=>t(x)),u(w);var N=d(w,2);{var O=e=>{var a=ee(),o=d(D(a)),l=m(o,!0);u(o),Q(()=>W(l,t(_))),c(e,a)};C(N,e=>{t(n)&&e(O)})}u(b),c(A,b),J()}export{de as component};
